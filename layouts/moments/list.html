{{- define "main" }}
{{- $paginator := .Paginate .Pages }}

{{ $css := resources.Get "css/pe/moments.css" | minify | fingerprint }}
<link crossorigin="anonymous" href="{{ $css.RelPermalink }}" integrity="{{ $css.Data.Integrity }}" rel="preload stylesheet" as="style">

{{ $dateformat := .Params.DateFormat }}

<article class="post-single">
    <header class="page-header">
        <h1 class="moment-title">ğŸ“ æˆ‘çš„ç¬é—´</h1>
        <p class="moment-description">è®°å½•ç”Ÿæ´»ä¸­çš„ç‚¹æ»´æ„Ÿæ‚Ÿã€ä¸´æ—¶çµæ„Ÿå’Œç®€å•æ€è€ƒ</p>
    </header>

    <div class="post-content">
        <div class="pe-moments-container">
            <div class="pe-moments">
            <ul>
                {{- range $moment := $paginator.Pages }}
                {{- if .Content }}
                <li class="pe-moment">
                    <div class="pe-moment-header">
                        <img src="{{ site.Params.label.icon }}" alt="{{ site.Params.author }}" class="pe-moment-profile">
                    </div>
                    <div class="pe-moment-body">
                        {{ if .Params.expired }}
                        <div class="pe-stamp">
                            <svg class="pe-stamp-icon" viewBox="0 0 1300 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M784.074702 99.196443l10.927871 18.473304-21.302843-2.56935-14.180213 16.066571-4.130475-21.042655-19.676671-8.521137 18.733492-10.440019 2.016452-21.335366 15.708814 14.603017 20.945085-4.683373-9.041512 19.449008zM1067.22363 642.402668l-18.440781 10.92787 2.56935-21.302842-16.099094-14.180213 21.042655-4.130475 8.521137-19.676671 10.440019 18.733492 21.367889 2.016452-14.603017 15.708814 4.683373 20.945085-19.481531-9.041512z" fill="#DBDBDB" p-id="1981"></path><path d="M1067.22363 642.402668l-18.440781 10.92787 2.56935-21.302842-16.099094-14.180213 21.042655-4.130475 8.521137-19.676671 10.440019 18.733492 21.367889 2.016452-14.603017 15.708814 4.683373 20.945085-19.481531-9.041512zM571.924408 100.009528l-17.400031-12.488994 20.52228-6.211974 6.504685-20.457234 12.261331 17.595172 21.432936-0.09757-12.944323 17.074798 6.732349 20.359663-20.262093-7.02506-17.269938 12.716659 0.422804-21.46546zM991.444053 784.43246l-21.172749 3.480006 10.114785-18.928632-9.822074-19.026203 21.107702 3.772717 15.090868-15.253486 2.927109 21.237796 19.156296 9.626933-19.318914 9.366746-3.219819 21.205273-14.863204-15.48115zM428.008258 156.795426l-20.749945-5.333841 16.879657-13.237034-1.365983-21.400413 17.822836 11.936097 19.936859-7.870669-5.88674 20.619851 13.692361 16.521899-21.432936 0.813086-11.513292 18.083024-7.382817-20.132zM854.260251 896.475655l-20.749945-5.333841 16.879657-13.237034-1.365983-21.400413 17.822836 11.96862 19.936859-7.903192-5.854217 20.619851 13.659838 16.554423-21.432936 0.780562-11.513292 18.115547-7.382817-20.164523zM562.460092 923.665237l10.895347 18.440782-21.302843-2.569351-14.180212 16.099095-4.130475-21.042655-19.676672-8.521137 18.733493-10.440019 2.016452-21.36789 15.708814 14.603018 20.945085-4.683373-9.008989 19.48153zM242.787359 420.788058l-18.473305 10.895347 2.569351-21.302843-16.066572-14.180213 21.042656-4.130474 8.521137-19.676672 10.440019 18.733492 21.335366 2.016453-14.603018 15.708813 4.683374 20.945085-19.449008-9.008988z" fill="#DBDBDB" p-id="1982"></path><path d="M242.787359 420.788058l-18.473305 10.895347 2.569351-21.302843-16.066572-14.180213 21.042656-4.130474 8.521137-19.676672 10.440019 18.733492 21.335366 2.016453-14.603018 15.708813 4.683374 20.945085-19.449008-9.008988zM700.814737 943.959854l-17.400032-12.521518 20.522281-6.211974 6.504685-20.42471 12.26133 17.595172 21.432937-0.130094-12.944323 17.107321 6.732349 20.359663-20.262093-7.025059-17.269938 12.684135 0.422804-21.432936zM303.541115 278.823313l-21.140226 3.480006 10.114785-18.928633-9.854597-19.058726 21.107702 3.772717 15.090868-15.220962 2.927109 21.237796 19.156296 9.626933-19.28639 9.366746-3.252342 21.172749-14.863205-15.448626z" fill="#DBDBDB" p-id="1983"></path><path d="M407.648595 90.642782a486.713038 486.713038 0 0 1 504.568397 11.578339l25.010513-14.407877A512.081309 512.081309 0 0 0 139.850723 547.401747l24.977989-14.407877a486.778085 486.778085 0 0 1 242.819883-442.351088zM893.28836 933.422265a486.810608 486.810608 0 0 1-504.568398-11.610863l-25.010513 14.407877a512.081309 512.081309 0 0 0 797.5394-459.621026l-24.97799 14.505447a486.843132 486.843132 0 0 1-242.982499 442.318565z" fill="#DBDBDB" p-id="1984"></path><path d="M814.061299 795.880705a326.665269 326.665269 0 0 1-258.170939 29.563792l-29.791456 17.172368a353.236906 353.236906 0 0 0 472.793013-272.448721l-29.693886 17.172367a326.762839 326.762839 0 0 1-155.136732 208.540194zM486.875655 228.119295a326.795363 326.795363 0 0 1 258.170939-29.563792l29.791456-17.172368a353.236906 353.236906 0 0 0-472.793013 272.448721l29.82398-17.172367a326.762839 326.762839 0 0 1 155.006638-208.540194zM1288.350389 374.73489a53.923837 53.923837 0 0 1-14.34283 12.001143L229.420232 988.712085A53.793743 53.793743 0 0 1 156.112434 968.937843l-148.924757-258.235985a53.76122 53.76122 0 0 1 19.741718-73.437891L1071.516722 35.352962A53.826266 53.826266 0 0 1 1144.82452 55.062157l148.827187 258.268508a53.793743 53.793743 0 0 1-5.398888 61.404225zM32.19819 665.754486a28.360426 28.360426 0 0 0-5.626553 10.73273 28.067715 28.067715 0 0 0 2.699444 21.432936L178.195839 956.188661a28.165285 28.165285 0 0 0 38.442687 10.342449l1044.587328-601.976052a28.132762 28.132762 0 0 0 10.440019-38.442687l-148.924758-258.268509a28.197808 28.197808 0 0 0-38.442687-10.342449L39.711101 659.444942a28.230332 28.230332 0 0 0-7.512911 6.309544z" fill="#DBDBDB" p-id="1985"></path><path d="M497.608385 599.406702l-136.59838 78.836779 38.149976 66.087597q7.903192 13.659838 21.302843 5.88674l112.75871-65.046848a20.814991 20.814991 0 0 0 9.757027-10.960394q2.56935-9.757027-16.71704-46.73616l18.213118-4.065428q20.262093 42.703256 17.920406 55.452438a35.775766 35.775766 0 0 1-15.936477 19.18882l-121.572559 70.185549q-24.912943 14.375353-39.906241-11.610862L318.079085 640.483786l15.838908-9.139082 18.310687 31.710338 120.336669-69.567604-33.173893-57.501413-148.111672 85.601652-8.878895-15.416103 164.308338-94.870828zM552.08512 448.823249a354.50532 354.50532 0 0 1 4.715896 35.157821l44.524568-25.693504-22.246022-38.735398 16.261712-9.39927L617.619819 448.823249l73.763125-42.573162 8.911418 15.416103-73.763125 42.605685 8.26095 14.310307a271.603113 271.603113 0 0 1 14.277783 31.385104l91.065587-52.52533 8.781324 15.220963-81.926505 47.289058q43.744005 38.149976 127.94715 24.782849l-0.780562 18.961156q-89.95979 10.537589-138.582309-32.523424a133.671272 133.671272 0 0 1 3.90281 47.972051q-5.463935 43.353724-47.776909 90.122407l-16.261712-8.45609q41.955217-47.419152 46.541019-86.219597a127.361728 127.361728 0 0 0-3.740193-38.052406L556.150548 583.827982l-8.748801-15.220963 85.178847-49.20794a229.77799 229.77799 0 0 0-14.082643-31.515198l-8.260949-14.310306-52.655423 30.539495a170.878069 170.878069 0 0 1-7.057583 47.809433l-20.164523-3.935335q14.407877-43.22363 3.675147-96.366904zM835.071431 438.318183a243.925679 243.925679 0 0 0-5.724123-39.873717l16.944704-2.17907a239.3724 239.3724 0 0 1 6.894966 46.54102q22.766397 5.691599 42.605685 12.716658l-4.000381 19.026203q-15.936478-5.756646-38.345117-12.488994a174.943497 174.943497 0 0 1-23.514435 79.32463l-17.822836-8.488613a160.210386 160.210386 0 0 0 23.156677-75.909671 410.445609 410.445609 0 0 0-42.475591-8.943942l3.252342-16.977227c11.936097 1.658695 24.847896 4.065428 39.028109 7.252723z m-51.647197-62.997872a268.903668 268.903668 0 0 1-2.634398 71.551533l-18.115547-1.853835a236.510338 236.510338 0 0 0 3.252343-68.787042z m-0.487852-42.573162L824.338701 308.972527l8.781324 15.188439-101.993457 58.867397-8.748801-15.188439L767.552803 341.49595a221.809751 221.809751 0 0 0-23.872193-15.87143l14.993298-12.163761q12.131237 9.171606 24.262474 19.28639z m15.57872 35.775767l4.228046-15.058346a255.666635 255.666635 0 0 1 48.785135 14.017596l-4.130475 16.294235a331.251072 331.251072 0 0 0-48.882706-15.383579z m78.251358-4.358139a237.09576 237.09576 0 0 1-0.325234 28.945847l-17.139844-6.244497q2.114023-50.313737-25.303224-116.0761l17.400032-6.504685q7.2202 18.148071 13.30208 37.824742l61.794505-35.775766 8.911418 15.448626-18.700968 10.797777q28.392949 53.76122 28.620613 103.554582a163.495252 163.495252 0 0 0 72.364618 20.489757l-1.23589 19.221343a168.243672 168.243672 0 0 1-71.90929-20.782468 198.588026 198.588026 0 0 1-26.636685 78.511545l-17.00975-9.171605q24.392568-39.028109 27.026965-79.357154a341.691091 341.691091 0 0 1-51.159346-41.012038z m-7.31777-44.231857l2.146546 9.334223c0.748039 3.675147 1.300937 6.504685 1.658694 9.008988a312.680197 312.680197 0 0 0 54.444212 46.996348 207.597014 207.597014 0 0 0-25.433317-84.268191z" fill="#AFAFAF" p-id="1986"></path></svg>
                        </div>
                        {{ end }}
                        <div class="pe-moment-content">
                            {{ .Content }}
                        </div>
                        <div class="pe-moment-tags">
                        {{- $tags := .Language.Params.Taxonomies.tag | default "tags" }}
                        {{- range (.GetTerms $tags) }}
                            <a href="{{ .Permalink }}" class="pe-moment-tag">{{ .LinkTitle }}</a>
                        {{- end }}
                        </div>
                        <div class="pe-moment-bottom">
                            <div class="pe-moment-time">
                                <span>{{ $moment.Param "date" | time.Format (default site.Params.DateFormat $dateformat) }}</span>
                            </div>
                            <div class="pe-moment-btn-container">
                                {{ if not (.Param "hideComment") }}
                                <button class="pe-moment-comment-btn" onclick="showComment(this)" data-slug="{{ $moment.Param "slug" }}">
                                    <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M552.83712 821.8112c0 14.14144 11.45856 25.6 25.6 25.6l389.18144 0c14.14144 0 25.6-11.45856 25.6-25.6s-11.45856-25.6-25.6-25.6L578.43712 796.2112C564.29568 796.2112 552.83712 807.66976 552.83712 821.8112z" p-id="9537"></path><path d="M967.61856 934.94272 393.48224 934.94272c-14.14144 0-25.6 11.45856-25.6 25.6s11.45856 25.6 25.6 25.6l574.13632 0c14.14144 0 25.6-11.45856 25.6-25.6S981.76 934.94272 967.61856 934.94272z" p-id="9538"></path><path d="M412.64128 840.96c0.29696-0.3072 0.512-0.6656 0.79872-0.99328 0.64512-0.59392 1.37216-1.18784 1.95584-1.78176L826.0608 427.53024c0.01024 0 0.02048-0.01024 0.03072-0.02048s0.01024-0.02048 0.02048-0.03072l76.58496-76.58496c32.12288-32.12288 49.8176-74.83392 49.8176-120.25856s-17.70496-88.13568-49.8176-120.25856l-22.70208-22.70208c-32.12288-32.13312-74.84416-49.8176-120.25856-49.8176s-88.12544 17.69472-120.25856 49.8176L152.17664 574.98624c-0.58368 0.57344-1.14688 1.30048-1.72032 1.91488-0.32768 0.29696-0.70656 0.52224-1.03424 0.83968-1.05472 1.04448-1.91488 2.19136-2.75456 3.35872-0.09216 0.11264-0.18432 0.22528-0.27648 0.33792-0.09216 0.14336-0.21504 0.26624-0.29696 0.4096-57.78432 71.69024-109.01504 329.3184-114.85184 359.424-1.65888 8.57088 1.15712 17.38752 7.4752 23.40864 4.8128 4.57728 11.15136 7.05536 17.65376 7.05536 2.02752 0 4.06528-0.23552 6.08256-0.72704 28.98944-7.09632 278.528-69.39648 347.38176-127.77472C410.79808 842.51648 411.77088 841.8304 412.64128 840.96zM203.73504 595.84512l377.25184-377.25184 190.80192 190.8224-377.2416 377.2416L203.73504 595.84512zM675.67616 123.88352c22.45632-22.44608 52.30592-34.816 84.06016-34.816s61.60384 12.36992 84.04992 34.816l22.71232 22.71232c22.44608 22.44608 34.816 52.29568 34.816 84.04992s-12.36992 61.60384-34.816 84.04992l-58.5216 58.5216L617.17504 182.39488 675.67616 123.88352zM171.73504 636.25216l182.85568 182.86592c-55.66464 30.9248-174.42816 68.096-264.93952 92.09856C109.81376 817.08032 142.336 693.3504 171.73504 636.25216z" p-id="9539"></path></svg>
                                </button>
                                {{ end }}
                                {{ if not (.Param "hideLink") }}
                                <a class="pe-moment-comment-btn" href="{{ .Permalink }}" >
<!--                                    <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M238.420169 783.23951s-0.87762 6.070207-0.365675 9.434418v0.219405c1.4627 14.627004 13.749384 26.036068 28.742064 26.036067 14.992679 0 26.474878-11.116523 28.742063-26.036067l2.267186-13.237439c112.262258-467.479056 463.01782-549.170875 622.890975-561.676963L759.141521 368.71021a29.254008 29.254008 0 0 0-0.438811 41.321287 29.254008 29.254008 0 0 0 41.248152 0.43881l215.090098-200.682499A29.107738 29.107738 0 0 0 1023.890297 188.798057a29.254008 29.254008 0 0 0-13.529978-25.304717L748.024997 4.644074a29.254008 29.254008 0 0 0-40.297396 8.995607 29.254008 29.254008 0 0 0 9.068742 40.297397l179.912153 109.117452c-559.482913 53.388566-648.122558 544.270828-658.361462 620.18498zM1023.890297 569.977788a29.254008 29.254008 0 0 0-58.434882 0v300.731207c0 25.085312-9.873228 48.854194-27.791308 66.772275-17.991215 17.91808-41.686962 27.791308-66.772274 27.791308H152.998464c-25.085312 0-48.781059-9.873228-66.772274-27.791308a93.905367 93.905367 0 0 1-27.791308-66.772275V232.67907c0-25.085312 9.873228-48.781059 27.791308-66.772274 17.991215-17.91808 41.686962-27.791308 66.772274-27.791308h187.29879a29.254008 29.254008 0 0 0 0-58.434882H152.998464C68.89319 79.680606 0 148.573796 0 232.67907v638.029925c0 84.105274 68.820055 152.998464 152.998464 152.998465h717.893369c84.105274 0 152.998464-68.820055 152.998464-152.998465V570.416598v-0.43881zM340.297254 79.680606v58.434882-58.434882z"></path></svg>-->
                                    <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M574.80892 387.211982a41.605544 41.605544 0 0 0-4.738568-8.012071 38.572403 38.572403 0 0 0-7.290986-7.359661 42.853138 42.853138 0 0 0-4.360856-2.884345 40.85012 40.85012 0 0 0-4.578327-2.174706c-0.743978-0.297591-1.487956-0.560845-2.289163-0.824098a21.575365 21.575365 0 0 0-2.209043-0.663858c-1.384944-0.343375-2.8729-0.698195-4.200614-0.904219s-2.586755-0.320483-3.880132-0.423496-2.289163-0.057229-3.433745 0-2.174705 0.091567-3.204829 0.171688l-1.53374 0.148795-0.766869 0.080121-0.675303 0.114458c-1.796993 0.297591-3.696999 0.606628-5.230739 1.030124l-2.415067 0.618074-2.186151 0.698195-2.174705 0.70964-1.980127 0.76687-1.980126 0.778316-1.842776 0.812653c-2.495188 1.087353-4.715677 2.289163-6.970503 3.433745s-4.315073 2.369284-6.295199 3.605432c-1.007232 0.618074-2.037355 1.213257-3.01025 1.842776l-2.895792 1.911452c-1.957235 1.247594-3.742782 2.575309-5.60845 3.85724s-3.593986 2.621092-5.390979 3.937361-3.433745 2.689767-5.196401 4.040373c-3.433745 2.712659-6.753032 5.448209-9.980753 8.26388q-9.774728 8.378338-18.816922 17.168725c-12.098228 11.720516-23.544045 23.875974-34.486246 36.489264s-21.518136 25.478388-31.327201 39.09891c14.879562-7.863276 29.163941-16.184385 43.425429-24.402481s28.408517-16.424747 42.509764-24.230794a777.388431 777.388431 0 0 1 21.060302-11.365696q5.265076-2.712659 10.461477-5.265076c3.433745-1.671089 6.947611-3.273504 10.358464-4.795797 2.460851-1.064461 4.933147-2.094584 7.336769-3.021696-1.087353 2.998804-2.357838 6.123512-3.674107 9.316895-2.746996 6.672911-5.974716 13.51751-9.271112 20.453675-1.659643 3.433745-3.433745 6.947611-5.150618 10.438585s-3.433745 7.00484-5.299413 10.518705c-14.433175 28.122372-29.919365 56.668239-44.856156 85.843626s-29.575991 58.842944-42.532655 90.181591c-3.239166 7.840385-6.363874 15.806673-9.282557 23.96754s-5.722908 16.516314-8.160868 25.180797c-1.25904 4.360856-2.369284 8.824725-3.433745 13.437389s-1.957235 9.38557-2.643984 14.433175a118.784687 118.784687 0 0 0-1.144581 16.436193 73.653831 73.653831 0 0 0 0.62952 9.671715 60.914637 60.914637 0 0 0 2.575308 11.319913 46.927849 46.927849 0 0 0 6.684357 13.002448 41.136266 41.136266 0 0 0 12.418712 11.148225 42.349522 42.349522 0 0 0 14.055463 5.093389 50.647739 50.647739 0 0 0 11.777745 0.606628 59.667043 59.667043 0 0 0 9.545811-1.396389 75.782753 75.782753 0 0 0 8.137976-2.289164 108.449114 108.449114 0 0 0 13.918113-5.722908c4.292181-2.094584 8.332555-4.315073 12.212687-6.65002s7.611468-4.704231 11.228346-7.187973c7.268094-4.921701 14.124138-10.106656 20.762712-15.451852a470.2056 470.2056 0 0 0 37.462158-33.868172 480.30081 480.30081 0 0 0 33.742268-37.107338c-15.280165 6.959057-30.102498 14.341608-44.867602 21.529581s-29.438641 14.238596-44.032057 20.694037c-7.290985 3.22772-14.559079 6.283753-21.747052 9.019303-3.593986 1.350606-7.153635 2.666875-10.667501 3.811457s-6.993394 2.174705-10.301235 3.021696c-2.540971 0.640966-5.024714 1.144582-7.313877 1.499402 0.377712-1.842777 0.927111-4.006036 1.568077-6.226524a193.434304 193.434304 0 0 1 6.86749-19.389214c2.758442-6.775924 5.906041-13.73498 9.156653-20.60247 1.625306-3.433745 3.330733-6.970502 5.024714-10.484368s3.433745-7.027732 5.184955-10.541598c14.124138-28.202493 29.404303-56.702576 44.249528-85.752059s29.564545-58.57969 42.761571-89.723758q2.472296-5.860258 4.875918-11.800637t4.578327-12.052445c3.056033-8.12653 5.848812-16.481976 8.435567-25.272364 1.281931-4.395194 2.437959-8.939183 3.50242-13.73498a135.93052 135.93052 0 0 0 2.586754-15.303057c0.309037-2.746996 0.515062-5.722908 0.572291-8.8934a69.71647 69.71647 0 0 0-0.583736-10.610272 49.537495 49.537495 0 0 0-3.754228-13.815101zM433.819348 741.860616a8.859062 8.859062 0 0 1-2.643983-0.320483c-0.583737-0.171687-0.789761-0.412049-0.41205-0.515062a5.024714 5.024714 0 0 1 2.724105 0.606629l0.423495 0.228916z m101.684637-325.393126a7.14219 7.14219 0 0 1-1.224703-0.171687l-0.606628-0.148796a8.321109 8.321109 0 0 1 3.159046 0c0.194579 0.125904 0.103012 0.377712-1.327715 0.320483z" p-id="6928"></path><path d="M590.932545 281.909005m-35.004018 35.004019a49.503158 49.503158 0 1 0 70.008037-70.008037 49.503158 49.503158 0 1 0-70.008037 70.008037Z" p-id="6929"></path><path d="M511.971385 0C229.259711 0 0 229.259711 0 511.971385s229.259711 512.028615 511.971385 512.028615S1024 794.774627 1024 511.971385 794.774627 0 511.971385 0z m313.512368 825.483753a441.739854 441.739854 0 1 1 95.00028-140.943788 441.808528 441.808528 0 0 1-95.00028 140.943788z"></path></svg>
                                </a>
                                {{ end }}
                            </div>
                        </div>
                    </div>
                </li>
                {{ end }}
                {{ end }}
            </ul>
        </div>
        </div>
    </div>

</article>

{{- if gt $paginator.TotalPages 1 }}
<footer class="page-footer">
    <nav class="pagination">
        {{- if $paginator.HasPrev }}
        <a class="prev" href="{{ $paginator.Prev.URL | absURL }}">
            {{ i18n "prev_page" }}
            {{- if (.Param "ShowPageNums") }}
            {{- sub $paginator.PageNumber 1 }}/{{ $paginator.TotalPages }}
            {{- end }}
        </a>
        {{- end }}
        {{- if $paginator.HasNext }}
        <a class="next" href="{{ $paginator.Next.URL | absURL }}">
            {{- i18n "next_page" }}
            {{- if (.Param "ShowPageNums") }}
            {{- add 1 $paginator.PageNumber }}/{{ $paginator.TotalPages }}
            {{- end }}
        </a>
        {{- end }}
    </nav>
</footer>
{{- end }}

<script>
    const getStoredTheme = () => localStorage.getItem("pref-theme") === "dark" ? "{{ .Site.Params.giscus.darkTheme }}" : "{{ .Site.Params.giscus.lightTheme }}";
    const setGiscusTheme = () => {
        const sendMessage = (message) => {
            const iframe = document.querySelector('iframe.giscus-frame');
            if (iframe) {
                iframe.contentWindow.postMessage({giscus: message}, 'https://giscus.app');
            }
        }
        sendMessage({setConfig: {theme: getStoredTheme()} })
    }
    function showComment(element) {
        const slug = element.getAttribute('data-slug');
        const commentElement = document.getElementById(slug);
        if (commentElement) {
            commentElement.remove();
            return;
        }
        const comments = document.getElementsByClassName("pe-moment-comment");
        if (comments) {
            for (let comment of comments) {
                comment.remove();
            }
        }
        const momentBody = element.closest('.pe-moment-body');
        let giscusAttributes = {
            'src': 'https://giscus.app/client.js',
            'data-repo': '{{ .Site.Params.giscus.repo }}',
            'data-repo-id': '{{ .Site.Params.giscus.repoId }}',
            'data-category': '{{ .Site.Params.giscus.category }}',
            'data-category-id': '{{ .Site.Params.giscus.categoryId }}',
            'data-mapping': '{{ .Site.Params.giscus.mapping | default "pathname" }}',
            'data-term': 'moments/' + slug,
            'data-strict': '{{ .Site.Params.giscus.strict | default "0" }}',
            'data-reactions-enabled': '{{ .Site.Params.giscus.reactionsEnabled | default "1" }}',
            'data-emit-metadata': '{{ .Site.Params.giscus.emitMetadata | default "0" }}',
            'data-input-position': '{{ .Site.Params.giscus.inputPosition | default "bottom" }}',
            'data-theme': getStoredTheme(),
            'data-lang': '{{ .Site.Params.giscus.lang | default "en" }}',
            'crossorigin': 'anonymous',
            'async': '',
        };
        const commentDiv = document.createElement('div');
        commentDiv.id = slug;
        commentDiv.className = "pe-moment-comment";
        // åŠ¨æ€åˆ›å»º giscus script
        let giscusScript = document.createElement("script");
        Object.entries(giscusAttributes).forEach(
            ([key, value]) => giscusScript.setAttribute(key, value));
        commentDiv.appendChild(giscusScript);
        momentBody.appendChild(commentDiv);
    }
    document.addEventListener("DOMContentLoaded", () => {
        // é¡µé¢ä¸»é¢˜å˜æ›´åï¼Œå˜æ›´ giscus ä¸»é¢˜
        const themeSwitcher = document.querySelector("#theme-toggle");
        if (themeSwitcher) {
            themeSwitcher.addEventListener("click", setGiscusTheme);
        }
        const themeFloatSwitcher = document.querySelector("#theme-toggle-float");
        if (themeFloatSwitcher) {
            themeFloatSwitcher.addEventListener("click", setGiscusTheme);
        }
    });
</script>
{{- end }}{{/* end main */}}
